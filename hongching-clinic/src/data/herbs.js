// TCM Herbs Database — 300+ herbs
// Format: [name, pinyin, category, properties, taste, meridians, minDose, maxDose, toxicity, schedule1, g6pd, pregnancy]
// tox: 0=無毒 1=小毒 2=有毒 3=大毒 | g6pd: 0=safe 1=caution 2=forbidden | preg: 0=safe 1=慎用 2=不宜 3=禁用

const _H = (n,py,cat,prop,taste,mer,dMin,dMax,tox=0,sch1=false,g6pd=0,preg=0) => ({n,py,cat,prop,taste,mer,dMin,dMax,tox,sch1,g6pd,preg});

export const HERB_CATEGORIES = [
  '發散風寒藥','發散風熱藥',
  '清熱瀉火藥','清熱燥濕藥','清熱解毒藥','清熱涼血藥','清虛熱藥',
  '瀉下藥','祛風濕藥','化濕藥','利水滲濕藥',
  '溫裡藥','理氣藥','消食藥','驅蟲藥',
  '止血藥','活血化瘀藥','化痰止咳平喘藥',
  '安神藥','平肝息風藥','開竅藥',
  '補氣藥','補陽藥','補血藥','補陰藥',
  '收澀藥','外用藥',
];

export const TCM_HERBS_DB = [
  // ═══ 發散風寒藥 ═══
  _H('麻黃','mahuang','發散風寒藥','溫','辛苦','肺膀胱',2,9,0,false,0,1),
  _H('桂枝','guizhi','發散風寒藥','溫','辛甘','心肺膀胱',3,9),
  _H('紫蘇葉','zisuye','發散風寒藥','溫','辛','肺脾',5,9),
  _H('生薑','shengjiang','發散風寒藥','微溫','辛','肺脾胃',3,9),
  _H('香薷','xiangru','發散風寒藥','微溫','辛','肺胃',3,9),
  _H('荊芥','jingjie','發散風寒藥','微溫','辛','肺肝',5,10),
  _H('防風','fangfeng','發散風寒藥','微溫','辛甘','膀胱肝脾',5,10),
  _H('羌活','qianghuo','發散風寒藥','溫','辛苦','膀胱腎',3,9),
  _H('白芷','baizhi','發散風寒藥','溫','辛','胃大腸肺',3,9),
  _H('細辛','xixin','發散風寒藥','溫','辛','心肺腎',1,3,1,true),
  _H('蒼耳子','cangerzi','發散風寒藥','溫','辛苦','肺',3,9,1),
  _H('辛夷','xinyi','發散風寒藥','溫','辛','肺胃',3,9),
  _H('藁本','gaoben','發散風寒藥','溫','辛','膀胱肝',3,9),
  _H('蔥白','congbai','發散風寒藥','溫','辛','肺胃',9,15),
  _H('胡荽','husui','發散風寒藥','溫','辛','肺脾',3,9),
  // ═══ 發散風熱藥 ═══
  _H('薄荷','bohe','發散風熱藥','涼','辛','肺肝',3,6,0,false,2),
  _H('牛蒡子','niubangzi','發散風熱藥','寒','辛苦','肺胃',6,12),
  _H('蟬蛻','chantui','發散風熱藥','寒','甘','肺肝',3,6),
  _H('桑葉','sangye','發散風熱藥','寒','甘苦','肺肝',5,9),
  _H('菊花','juhua','發散風熱藥','微寒','辛甘苦','肺肝',5,9),
  _H('蔓荊子','manjingzi','發散風熱藥','微寒','辛苦','膀胱肝胃',5,9),
  _H('柴胡','chaihu','發散風熱藥','微寒','辛苦','肝膽',3,9),
  _H('升麻','shengma','發散風熱藥','微寒','辛甘','肺脾胃大腸',3,9),
  _H('葛根','gegen','發散風熱藥','涼','辛甘','脾胃',9,15),
  _H('淡豆豉','dandouchi','發散風熱藥','涼','辛甘苦','肺胃',6,12),
  _H('浮萍','fuping','發散風熱藥','寒','辛','肺膀胱',3,9),
  _H('木賊','muzei','發散風熱藥','平','甘苦','肺肝',3,9),
  // ═══ 清熱瀉火藥 ═══
  _H('石膏','shigao','清熱瀉火藥','大寒','甘辛','肺胃',15,60),
  _H('知母','zhimu','清熱瀉火藥','寒','甘苦','肺胃腎',6,12),
  _H('蘆根','lugen','清熱瀉火藥','寒','甘','肺胃',15,30),
  _H('天花粉','tianhuafen','清熱瀉火藥','微寒','甘微苦','肺胃',10,15,0,false,0,3),
  _H('淡竹葉','danzhuye','清熱瀉火藥','寒','甘淡','心胃小腸',6,9),
  _H('梔子','zhizi','清熱瀉火藥','寒','苦','心肺三焦',6,9,0,false,1),
  _H('夏枯草','xiakucao','清熱瀉火藥','寒','辛苦','肝膽',9,15),
  _H('決明子','juemingzi','清熱瀉火藥','微寒','甘苦鹹','肝大腸',9,15),
  _H('穀精草','gujingcao','清熱瀉火藥','平','辛甘','肝胃',6,15),
  _H('青葙子','qingxiangzi','清熱瀉火藥','微寒','苦','肝',9,15),
  _H('密蒙花','mimenghua','清熱瀉火藥','微寒','甘','肝',9,15),
  _H('寒水石','hanshuishi','清熱瀉火藥','寒','辛鹹','心胃腎',9,15),
  // ═══ 清熱燥濕藥 ═══
  _H('黃芩','huangqin','清熱燥濕藥','寒','苦','肺膽脾大腸小腸',3,9,0,false,1),
  _H('黃連','huanglian','清熱燥濕藥','寒','苦','心脾胃肝膽大腸',2,5,0,false,1),
  _H('黃柏','huangbai','清熱燥濕藥','寒','苦','腎膀胱',3,12,0,false,1),
  _H('龍膽','longdan','清熱燥濕藥','寒','苦','肝膽',3,6,0,false,1),
  _H('苦參','kushen','清熱燥濕藥','寒','苦','心肝胃大腸膀胱',4.5,9,0,false,1),
  _H('秦皮','qinpi','清熱燥濕藥','寒','苦澀','肝膽大腸',6,12),
  // ═══ 清熱解毒藥 ═══
  _H('金銀花','jinyinhua','清熱解毒藥','寒','甘','肺心胃',6,15,0,false,2),
  _H('連翹','lianqiao','清熱解毒藥','微寒','苦','肺心小腸',6,15,0,false,1),
  _H('板藍根','banlangen','清熱解毒藥','寒','苦','心胃',9,15,0,false,1),
  _H('大青葉','daqingye','清熱解毒藥','大寒','苦','心胃',9,15),
  _H('青黛','qingdai','清熱解毒藥','寒','鹹','肝肺胃',1.5,3),
  _H('貫眾','guanzhong','清熱解毒藥','微寒','苦','肝脾',4.5,9,1),
  _H('蒲公英','pugongying','清熱解毒藥','寒','甘苦','肝胃',9,15,0,false,1),
  _H('紫花地丁','zihuadiding','清熱解毒藥','寒','苦辛','心肝',15,30),
  _H('野菊花','yejuhua','清熱解毒藥','微寒','苦辛','肝心',9,15,0,false,1),
  _H('魚腥草','yuxingcao','清熱解毒藥','微寒','辛','肺',15,25,0,false,1),
  _H('敗醬草','baijiangcao','清熱解毒藥','微寒','辛苦','胃大腸肝',6,15),
  _H('射干','shegan','清熱解毒藥','寒','苦','肺',3,9),
  _H('山豆根','shandougen','清熱解毒藥','寒','苦','肺胃',3,6,1),
  _H('馬勃','mabo','清熱解毒藥','平','辛','肺',1.5,6),
  _H('白頭翁','baitouweng','清熱解毒藥','寒','苦','胃大腸肝',6,15),
  _H('馬齒莧','machixian','清熱解毒藥','寒','酸','大腸肝',9,15),
  _H('鴉膽子','yadanzi','清熱解毒藥','寒','苦','大腸肝',0.5,2,2,true),
  _H('半邊蓮','banbianlan','清熱解毒藥','平','辛','心小腸肺',9,15),
  _H('白花蛇舌草','baihuasheshecao','清熱解毒藥','微寒','微苦甘','胃大腸小腸',15,60),
  _H('土茯苓','tufuling','清熱解毒藥','平','甘淡','肝胃',15,60),
  // ═══ 清熱涼血藥 ═══
  _H('生地','shengdi','清熱涼血藥','寒','甘苦','心肝腎',10,15),
  _H('玄參','xuanshen','清熱涼血藥','微寒','甘苦鹹','肺胃腎',9,15),
  _H('牡丹皮','mudanpi','清熱涼血藥','微寒','辛苦','心肝腎',6,12),
  _H('赤芍','chishao','清熱涼血藥','微寒','苦','肝',6,12),
  _H('紫草','zicao','清熱涼血藥','寒','甘鹹','心肝',5,9),
  _H('水牛角','shuiniujiao','清熱涼血藥','寒','苦鹹','心肝胃',15,30),
  // ═══ 清虛熱藥 ═══
  _H('青蒿','qinghao','清虛熱藥','寒','苦辛','肝膽',6,12,0,false,0,2),
  _H('白薇','baiwei','清虛熱藥','寒','苦鹹','胃肝',4.5,9),
  _H('地骨皮','digupi','清虛熱藥','寒','甘','肺肝腎',9,15),
  _H('銀柴胡','yinchaihu','清虛熱藥','微寒','甘','肝胃',3,9),
  _H('胡黃連','huhuanglian','清虛熱藥','寒','苦','肝胃大腸',3,9),
  // ═══ 瀉下藥 ═══
  _H('大黃','dahuang','瀉下藥','寒','苦','脾胃大腸肝心',3,15,0,false,1,2),
  _H('芒硝','mangxiao','瀉下藥','寒','苦鹹','胃大腸',6,12,0,false,0,2),
  _H('番瀉葉','fanxieye','瀉下藥','寒','甘苦','大腸',2,6,0,false,0,2),
  _H('蘆薈','luhui','瀉下藥','寒','苦','肝胃大腸',2,5,0,false,0,2),
  _H('火麻仁','huomaren','瀉下藥','平','甘','脾胃大腸',10,15),
  _H('郁李仁','yuliren','瀉下藥','平','辛苦甘','脾大腸小腸',6,10),
  _H('松子仁','songziren','瀉下藥','溫','甘','肝肺大腸',10,15),
  _H('甘遂','gansui','瀉下藥','寒','苦','肺腎大腸',0.5,1,2,true,0,3),
  _H('大戟','daji','瀉下藥','寒','苦辛','肺脾腎',1.5,3,2,true,0,3),
  _H('芫花','yuanhua','瀉下藥','溫','苦辛','肺脾腎',1.5,3,2,true,0,3),
  // ═══ 祛風濕藥 ═══
  _H('獨活','duhuo','祛風濕藥','微溫','辛苦','腎膀胱',3,9),
  _H('威靈仙','weilingxian','祛風濕藥','溫','辛鹹','膀胱',6,9),
  _H('防己','fangji','祛風濕藥','寒','苦辛','膀胱脾肺',4.5,9),
  _H('秦艽','qinjiao','祛風濕藥','平','辛苦','胃肝膽',3,9),
  _H('木瓜','mugua','祛風濕藥','溫','酸','肝脾',6,9),
  _H('絡石藤','luoshiteng','祛風濕藥','微寒','苦','心肝腎',6,12),
  _H('桑枝','sangzhi','祛風濕藥','平','微苦','肝',9,15),
  _H('豨薟草','xixiancao','祛風濕藥','寒','辛苦','肝腎',9,12),
  _H('臭梧桐','chouwutong','祛風濕藥','平','辛苦甘','肝',9,15),
  _H('海風藤','haifengteng','祛風濕藥','微溫','辛苦','肝',6,12),
  _H('桑寄生','sangjisheng','祛風濕藥','平','苦甘','肝腎',9,15),
  _H('五加皮','wujiapi','祛風濕藥','溫','辛苦','肝腎',4.5,9),
  _H('狗脊','gouji','祛風濕藥','溫','苦甘','肝腎',6,12),
  _H('千年健','qiannanjian','祛風濕藥','溫','辛苦','肝腎',4.5,9),
  _H('雷公藤','leigongteng','祛風濕藥','寒','苦辛','肝腎',10,25,2,true,0,3),
  // ═══ 化濕藥 ═══
  _H('蒼朮','cangzhu','化濕藥','溫','辛苦','脾胃肝',3,9),
  _H('厚朴','houpo','化濕藥','溫','辛苦','脾胃肺大腸',3,9),
  _H('藿香','huoxiang','化濕藥','微溫','辛','脾胃肺',3,9),
  _H('佩蘭','peilan','化濕藥','平','辛','脾胃',3,9),
  _H('砂仁','sharen','化濕藥','溫','辛','脾胃腎',3,6),
  _H('白豆蔻','baidoukou','化濕藥','溫','辛','肺脾胃',3,6),
  _H('草豆蔻','caodoukou','化濕藥','溫','辛','脾胃',3,6),
  // ═══ 利水滲濕藥 ═══
  _H('茯苓','fuling','利水滲濕藥','平','甘淡','心脾腎',9,15),
  _H('豬苓','zhuling','利水滲濕藥','平','甘淡','腎膀胱',6,12),
  _H('澤瀉','zexie','利水滲濕藥','寒','甘淡','腎膀胱',6,9),
  _H('薏苡仁','yiyiren','利水滲濕藥','微寒','甘淡','脾胃肺',9,30,0,false,0,1),
  _H('車前子','cheqianzi','利水滲濕藥','微寒','甘','腎肝肺小腸',9,15),
  _H('滑石','huashi','利水滲濕藥','寒','甘淡','膀胱肺胃',10,15),
  _H('木通','mutong','利水滲濕藥','寒','苦','心小腸膀胱',3,6,0,false,0,1),
  _H('通草','tongcao','利水滲濕藥','微寒','甘淡','肺胃',3,5,0,false,0,1),
  _H('石韋','shiwei','利水滲濕藥','微寒','甘苦','肺膀胱',6,12),
  _H('萆薢','bixie','利水滲濕藥','平','苦','胃膀胱',9,15),
  _H('海金沙','haijinsha','利水滲濕藥','寒','甘','膀胱小腸',6,15),
  _H('地膚子','difuzi','利水滲濕藥','寒','甘苦','腎膀胱',9,15),
  _H('萹蓄','bianxu','利水滲濕藥','微寒','苦','膀胱',9,15),
  _H('瞿麥','qumai','利水滲濕藥','寒','苦','心小腸',9,15,0,false,0,3),
  _H('燈心草','dengxincao','利水滲濕藥','微寒','甘淡','心肺小腸',1,3),
  // ═══ 溫裡藥 ═══
  _H('附子','fuzi','溫裡藥','大熱','辛甘','心腎脾',3,15,2,true,0,3),
  _H('乾薑','ganjiang','溫裡藥','熱','辛','脾胃心肺',3,9),
  _H('肉桂','rougui','溫裡藥','大熱','辛甘','腎脾心肝',1,4.5),
  _H('吳茱萸','wuzhuyu','溫裡藥','熱','辛苦','肝脾胃腎',2,5,1),
  _H('小茴香','xiaohuixiang','溫裡藥','溫','辛','肝腎脾胃',3,6),
  _H('丁香','dingxiang','溫裡藥','溫','辛','脾胃肺腎',1,3),
  _H('高良薑','gaoliangjiang','溫裡藥','熱','辛','脾胃',3,6),
  _H('花椒','huajiao','溫裡藥','溫','辛','脾胃腎',3,6),
  // ═══ 理氣藥 ═══
  _H('陳皮','chenpi','理氣藥','溫','辛苦','脾肺',3,9),
  _H('青皮','qingpi','理氣藥','溫','辛苦','肝膽胃',3,9),
  _H('枳實','zhishi','理氣藥','微寒','苦辛','脾胃',3,9,0,false,0,1),
  _H('枳殼','zhiqiao','理氣藥','微寒','苦辛','脾胃',3,9),
  _H('木香','muxiang','理氣藥','溫','辛苦','脾胃大腸膽三焦',3,6),
  _H('香附','xiangfu','理氣藥','平','辛微苦微甘','肝脾三焦',6,9),
  _H('沉香','chenxiang','理氣藥','溫','辛苦','脾胃腎',1,5),
  _H('烏藥','wuyao','理氣藥','溫','辛','肺脾腎膀胱',6,9),
  _H('荔枝核','lizhihe','理氣藥','溫','辛苦','肝胃',9,15),
  _H('川楝子','chuanlianzi','理氣藥','寒','苦','肝胃小腸膀胱',4.5,9,1),
  _H('薤白','xiebai','理氣藥','溫','辛苦','肺胃大腸',5,9),
  _H('柿蒂','shidi','理氣藥','平','苦澀','胃',6,9),
  // ═══ 消食藥 ═══
  _H('山楂','shanzha','消食藥','微溫','酸甘','脾胃肝',9,12),
  _H('神曲','shenqu','消食藥','溫','辛甘','脾胃',6,15),
  _H('麥芽','maiya','消食藥','平','甘','脾胃肝',9,15),
  _H('穀芽','guya','消食藥','溫','甘','脾胃',9,15),
  _H('萊菔子','laifuzi','消食藥','平','辛甘','脾胃肺',5,12),
  _H('雞內金','jineijin','消食藥','平','甘','脾胃小腸膀胱',3,9),
  _H('谷芽','guya2','消食藥','溫','甘','脾胃',9,15),
  // ═══ 驅蟲藥 ═══
  _H('使君子','shijunzi','驅蟲藥','溫','甘','脾胃',9,12,1),
  _H('苦楝皮','kulianpi','驅蟲藥','寒','苦','肝脾胃',4.5,9,2),
  _H('檳榔','binglang','驅蟲藥','溫','辛苦','胃大腸',6,15),
  _H('南瓜子','nanguazi','驅蟲藥','平','甘','胃大腸',60,120),
  _H('鶴草芽','hecaoya','驅蟲藥','涼','苦澀','肝小腸大腸',30,45),
  // ═══ 止血藥 ═══
  _H('小薊','xiaoji','止血藥','涼','甘苦','心肝',4.5,9),
  _H('大薊','daji2','止血藥','涼','甘苦','心肝',9,15),
  _H('地榆','diyu','止血藥','微寒','苦酸澀','肝大腸',9,15),
  _H('槐花','huaihua','止血藥','微寒','苦','肝大腸',5,9),
  _H('側柏葉','cebaiye','止血藥','寒','苦澀','肺肝脾',6,12),
  _H('白茅根','baimaogen','止血藥','寒','甘','肺胃膀胱',9,30),
  _H('三七','sanqi','止血藥','溫','甘微苦','肝胃',3,9,0,false,0,2),
  _H('茜草','qiancao','止血藥','寒','苦','肝',6,9),
  _H('蒲黃','puhuang','止血藥','平','甘','肝心包',5,9,0,false,0,2),
  _H('花蕊石','huaruishi','止血藥','平','酸澀','肝',4.5,9),
  _H('白及','baiji','止血藥','微寒','苦甘澀','肺胃肝',6,15),
  _H('仙鶴草','xianhecao','止血藥','平','苦澀','肺肝脾',6,12),
  _H('艾葉','aiye','止血藥','溫','辛苦','脾肝腎',3,9),
  // ═══ 活血化瘀藥 ═══
  _H('川芎','chuanxiong','活血化瘀藥','溫','辛','肝膽心包',3,9,0,false,0,1),
  _H('延胡索','yanhusuo','活血化瘀藥','溫','辛苦','肝脾',3,9),
  _H('鬱金','yujin','活血化瘀藥','寒','辛苦','肝心肺',3,9),
  _H('薑黃','jianghuang','活血化瘀藥','溫','辛苦','脾肝',3,9),
  _H('乳香','ruxiang','活血化瘀藥','溫','辛苦','心肝脾',3,5,0,false,0,2),
  _H('沒藥','moyao','活血化瘀藥','平','辛苦','心肝脾',3,5,0,false,0,2),
  _H('五靈脂','wulingzhi','活血化瘀藥','溫','苦甘','肝',3,9),
  _H('丹參','danshen','活血化瘀藥','微寒','苦','心肝',10,15,0,false,0,1),
  _H('紅花','honghua','活血化瘀藥','溫','辛','心肝',3,9,0,false,0,2),
  _H('桃仁','taoren','活血化瘀藥','平','苦甘','心肝大腸',4.5,9,0,false,0,2),
  _H('益母草','yimucao','活血化瘀藥','微寒','辛苦','肝心包膀胱',9,30,0,false,0,2),
  _H('牛膝','niuxi','活血化瘀藥','平','苦酸','肝腎',5,12,0,false,0,1),
  _H('雞血藤','jixueteng','活血化瘀藥','溫','苦甘','肝腎',9,15),
  _H('王不留行','wangbuliuxing','活血化瘀藥','平','苦','肝胃',4.5,9,0,false,0,2),
  _H('月季花','yuejihua','活血化瘀藥','平','甘','肝',3,6),
  _H('凌霄花','lingxiaohua','活血化瘀藥','寒','辛酸','肝心包',5,9,0,false,0,2),
  _H('土鱉蟲','tubiechong','活血化瘀藥','寒','鹹','肝',3,9,0,false,0,3),
  _H('穿山甲','chuanshanjia','活血化瘀藥','微寒','鹹','肝胃',5,9,0,false,0,2),
  // ═══ 化痰止咳平喘藥 ═══
  _H('半夏','banxia','化痰止咳平喘藥','溫','辛','脾胃肺',3,9,2,true,0,1),
  _H('天南星','tiannanxing','化痰止咳平喘藥','溫','苦辛','肺肝脾',3,9,2,true,0,3),
  _H('白芥子','baijiezi','化痰止咳平喘藥','溫','辛','肺胃',3,6),
  _H('旋覆花','xuanfuhua','化痰止咳平喘藥','微溫','苦辛鹹','肺胃',3,9),
  _H('白前','baiqian','化痰止咳平喘藥','微溫','辛甘','肺',3,9),
  _H('桔梗','jiegeng','化痰止咳平喘藥','平','辛苦','肺',3,9),
  _H('前胡','qianhu','化痰止咳平喘藥','微寒','苦辛','肺',3,9),
  _H('川貝母','chuanbeimu','化痰止咳平喘藥','微寒','苦甘','肺心',3,9),
  _H('浙貝母','zhebeimu','化痰止咳平喘藥','寒','苦','肺心',5,9),
  _H('瓜蔞','gualou','化痰止咳平喘藥','寒','甘微苦','肺胃大腸',9,15),
  _H('竹茹','zhuru','化痰止咳平喘藥','微寒','甘','肺胃心膽',6,9),
  _H('竹瀝','zhuli','化痰止咳平喘藥','寒','甘','心肺胃',30,50),
  _H('昆布','kunbu','化痰止咳平喘藥','寒','鹹','肝胃腎',6,12),
  _H('海藻','haizao','化痰止咳平喘藥','寒','鹹苦','肝胃腎',6,12),
  _H('杏仁','xingren','化痰止咳平喘藥','微溫','苦','肺大腸',4.5,9,1),
  _H('紫蘇子','zisuzi','化痰止咳平喘藥','溫','辛','肺',3,9),
  _H('百部','baibu','化痰止咳平喘藥','微溫','甘苦','肺',3,9),
  _H('紫菀','ziwan','化痰止咳平喘藥','微溫','辛苦','肺',5,9),
  _H('款冬花','kuandonghua','化痰止咳平喘藥','溫','辛微甘','肺',5,9),
  _H('枇杷葉','pipaye','化痰止咳平喘藥','微寒','苦','肺胃',6,9),
  _H('桑白皮','sangbaipi','化痰止咳平喘藥','寒','甘','肺',6,12),
  _H('葶藶子','tinglizi','化痰止咳平喘藥','大寒','苦辛','肺膀胱',3,9),
  _H('白果','baiguo','化痰止咳平喘藥','平','甘苦澀','肺腎',6,9,1),
  // ═══ 安神藥 ═══
  _H('酸棗仁','suanzaoren','安神藥','平','甘酸','肝膽心',9,15),
  _H('柏子仁','baiziren','安神藥','平','甘','心腎大腸',9,15),
  _H('遠志','yuanzhi','安神藥','溫','辛苦','心腎肺',3,9),
  _H('合歡皮','hehuanpi','安神藥','平','甘','心肝',6,12),
  _H('夜交藤','yejiaoteng','安神藥','平','甘','心肝',9,15),
  _H('龍骨','longgu','安神藥','平','甘澀','心肝腎',15,30),
  _H('牡蠣','muli','安神藥','微寒','鹹澀','肝腎',9,30),
  _H('珍珠母','zhenzhumu','安神藥','寒','鹹','肝心',10,25),
  // ═══ 平肝息風藥 ═══
  _H('石決明','shijueming','平肝息風藥','寒','鹹','肝',6,20),
  _H('代赭石','daizheishi','平肝息風藥','寒','苦','肝心',10,30),
  _H('天麻','tianma','平肝息風藥','平','甘','肝',3,9),
  _H('鉤藤','gouteng','平肝息風藥','微寒','甘','肝心包',3,12),
  _H('羚羊角','lingyangjiao','平肝息風藥','寒','鹹','肝心',1,3),
  _H('地龍','dilong','平肝息風藥','寒','鹹','肝脾膀胱',5,10),
  _H('全蠍','quanxie','平肝息風藥','平','辛','肝',2,5,1,true,0,3),
  _H('蜈蚣','wugong','平肝息風藥','溫','辛','肝',1,3,2,true,0,3),
  _H('僵蠶','jiangcan','平肝息風藥','平','辛鹹','肝肺胃',5,9),
  _H('牛黃','niuhuang','平肝息風藥','涼','苦甘','心肝',0.2,0.5,0,false,2),
  _H('珍珠','zhenzhu','平肝息風藥','寒','甘鹹','心肝',0.1,0.3),
  // ═══ 開竅藥 ═══
  _H('麝香','shexiang','開竅藥','溫','辛','心脾',0.03,0.1,0,false,0,3),
  _H('冰片','bingpian','開竅藥','微寒','辛苦','心脾肺',0.15,0.3),
  _H('石菖蒲','shichangpu','開竅藥','溫','辛苦','心胃',3,9),
  // ═══ 補氣藥 ═══
  _H('人參','renshen','補氣藥','微溫','甘微苦','脾肺心腎',3,9),
  _H('西洋參','xiyangshen','補氣藥','涼','甘微苦','心肺腎',3,6),
  _H('黨參','dangshen','補氣藥','平','甘','脾肺',9,30),
  _H('太子參','taizishen','補氣藥','平','甘微苦','脾肺',9,30),
  _H('黃芪','huangqi','補氣藥','微溫','甘','脾肺',9,30),
  _H('白朮','baizhu','補氣藥','溫','苦甘','脾胃',6,12),
  _H('山藥','shanyao','補氣藥','平','甘','脾肺腎',15,30),
  _H('白扁豆','baibiandou','補氣藥','微溫','甘','脾胃',9,15),
  _H('甘草','gancao','補氣藥','平','甘','心肺脾胃',2,10),
  _H('大棗','dazao','補氣藥','溫','甘','脾胃心',6,15),
  _H('蜂蜜','fengmi','補氣藥','平','甘','脾胃肺大腸',15,30),
  // ═══ 補陽藥 ═══
  _H('鹿茸','lurong','補陽藥','溫','甘鹹','腎肝',1,2),
  _H('淫羊藿','yinyanghuo','補陽藥','溫','辛甘','肝腎',3,15),
  _H('巴戟天','bajitian','補陽藥','微溫','辛甘','腎肝',3,15),
  _H('仙茅','xianmao','補陽藥','熱','辛','腎肝脾',3,9,1),
  _H('杜仲','duzhong','補陽藥','溫','甘','肝腎',6,9),
  _H('續斷','xuduan','補陽藥','微溫','苦辛','肝腎',9,15),
  _H('肉蓯蓉','roucongrong','補陽藥','溫','甘鹹','腎大腸',6,9),
  _H('鎖陽','suoyang','補陽藥','溫','甘','腎大腸肝',5,15),
  _H('補骨脂','buguzi','補陽藥','溫','辛苦','腎脾',6,9),
  _H('益智仁','yizhiren','補陽藥','溫','辛','脾腎',3,9),
  _H('菟絲子','tusizi','補陽藥','平','辛甘','腎肝脾',6,12),
  _H('沙苑子','shayuanzi','補陽藥','溫','甘','肝腎',9,15),
  // ═══ 補血藥 ═══
  _H('當歸','danggui','補血藥','溫','甘辛','肝心脾',6,12),
  _H('熟地','shudi','補血藥','微溫','甘','肝腎',9,15),
  _H('白芍','baishao','補血藥','微寒','苦酸','肝脾',5,10),
  _H('阿膠','ejiao','補血藥','平','甘','肺肝腎',3,9),
  _H('何首烏','heshouwu','補血藥','微溫','苦甘澀','肝腎',6,12),
  _H('龍眼肉','longyanrou','補血藥','溫','甘','心脾',10,15),
  // ═══ 補陰藥 ═══
  _H('北沙參','beishashen','補陰藥','微寒','甘微苦','肺胃',4.5,9),
  _H('南沙參','nanshashen','補陰藥','微寒','甘','肺胃',9,15),
  _H('麥冬','maidong','補陰藥','微寒','甘微苦','心肺胃',6,12),
  _H('天冬','tiandong','補陰藥','大寒','甘苦','肺腎',6,12),
  _H('玉竹','yuzhu','補陰藥','微寒','甘','肺胃',6,12),
  _H('石斛','shihu','補陰藥','微寒','甘','胃腎',6,12),
  _H('百合','baihe','補陰藥','微寒','甘','心肺',6,12),
  _H('枸杞子','gouqizi','補陰藥','平','甘','肝腎',6,12),
  _H('墨旱蓮','mohanlian','補陰藥','寒','甘酸','腎肝',6,12),
  _H('女貞子','nvzhenzi','補陰藥','涼','甘苦','肝腎',6,12),
  _H('黑芝麻','heizhima','補陰藥','平','甘','肝腎大腸',9,15),
  _H('龜板','guiban','補陰藥','寒','鹹甘','肝腎心',9,24),
  // ═══ 收澀藥 ═══
  _H('五味子','wuweizi','收澀藥','溫','酸甘','肺心腎',2,6),
  _H('烏梅','wumei','收澀藥','平','酸','肝脾肺大腸',6,12),
  _H('五倍子','wubeizi','收澀藥','寒','酸鹹','肺大腸腎',3,6),
  _H('罌粟殼','yingsuke','收澀藥','平','酸澀','肺大腸腎',3,6),
  _H('訶子','hezi','收澀藥','平','苦酸澀','肺大腸',3,9),
  _H('石榴皮','shiliupi','收澀藥','溫','酸澀','大腸',3,9),
  _H('肉豆蔻','roudoukou','收澀藥','溫','辛','脾胃大腸',3,9),
  _H('赤石脂','chishizhi','收澀藥','溫','甘酸澀','大腸胃',9,12),
  _H('山茱萸','shanzhuyu','收澀藥','微溫','酸澀','肝腎',6,12),
  _H('覆盆子','fupenzi','收澀藥','溫','甘酸','肝腎膀胱',6,12),
  _H('金櫻子','jinyingzi','收澀藥','平','酸澀','腎膀胱大腸',6,12),
  _H('蓮子','lianzi','收澀藥','平','甘澀','脾腎心',6,15),
  _H('芡實','qianshi','收澀藥','平','甘澀','脾腎',9,15),
  _H('桑螵蛸','sangpiaoxiao','收澀藥','平','甘鹹','肝腎',5,9),
  // ═══ 外用藥 ═══
  _H('硫黃','liuhuang','外用藥','溫','酸','腎大腸',1.5,3,1),
  _H('雄黃','xionghuang','外用藥','溫','辛苦','肝胃',0.05,0.1,2,true,0,3),
  _H('蛇床子','shechuangzi','外用藥','溫','辛苦','腎',3,9),
  _H('明礬','mingfan','外用藥','寒','酸澀','肺脾肝大腸',0.6,1.5),
  _H('硼砂','pengsha','外用藥','涼','甘鹹','肺胃',1.5,3),
];

// ─── Helper functions ───

/** Search herbs by name or pinyin */
export function searchHerbs(query) {
  if (!query) return [];
  const q = query.toLowerCase();
  return TCM_HERBS_DB.filter(h => h.n.includes(query) || h.py.includes(q));
}

/** Get herbs by category */
export function getHerbsByCategory(cat) {
  return TCM_HERBS_DB.filter(h => h.cat === cat);
}

/** Get G6PD-flagged herbs */
export function getG6PDHerbs() {
  return TCM_HERBS_DB.filter(h => h.g6pd > 0);
}

/** Get pregnancy-flagged herbs */
export function getPregnancyHerbs() {
  return TCM_HERBS_DB.filter(h => h.preg > 0);
}

/** Get Schedule 1 (附表一) herbs */
export function getSchedule1Herbs() {
  return TCM_HERBS_DB.filter(h => h.sch1);
}

/** Get toxic herbs */
export function getToxicHerbs() {
  return TCM_HERBS_DB.filter(h => h.tox > 0);
}

/** Validate dose range, returns warning string or null */
export function validateDose(herb, dose) {
  if (dose < herb.dMin) return `${herb.n} 用量偏低（建議 ${herb.dMin}-${herb.dMax}g）`;
  if (dose > herb.dMax) return `${herb.n} 用量偏高（建議 ${herb.dMin}-${herb.dMax}g）`;
  return null;
}

/** Format herb details for display */
export function formatHerbInfo(h) {
  const toxLabels = ['無毒','小毒','有毒','大毒'];
  const pregLabels = ['安全','慎用','不宜','禁用'];
  const g6pdLabels = ['安全','慎用','禁用'];
  return {
    name: h.n,
    pinyin: h.py,
    category: h.cat,
    properties: h.prop,
    taste: h.taste,
    meridians: h.mer,
    dosage: `${h.dMin}-${h.dMax}g`,
    toxicity: toxLabels[h.tox],
    schedule1: h.sch1 ? '附表一' : '—',
    g6pd: g6pdLabels[h.g6pd],
    pregnancy: pregLabels[h.preg],
  };
}
